{% extends "layout.html" %}

{% block title %}Register - AutoScheduler{% endblock %}

{% block layout_body %}
<nav class="landing-header">
    <div class="logo">AutoScheduler</div>
    <div class="landing-nav-links">
        <a href="/">Home</a>
        <a href="/login" class="btn btn-outline">Login</a>
        <a href="/register" class="btn btn-primary">Register</a>
    </div>
</nav>

<div class="auth-wrapper">
    <div class="auth-card animate-fade-in" style="max-width: 500px;">
        <h2 style="text-align: center; margin-bottom: 2rem; color: #333;">Create Account</h2>
        <form action="/register" method="POST">
            <div style="margin-bottom: 1rem;">
                <label for="role" style="display: block; margin-bottom: 0.5rem; color: #555;">I am a...</label>
                <select name="role" id="role" required onchange="toggleBatchSelection()"
                    style="background: #f0f4f8; border: 1px solid #d1d9e6;">
                    <option value="" disabled selected>Select Role</option>
                    <option value="student">Student</option>
                    <option value="faculty">Faculty</option>
                    <option value="admin">Administrator</option>
                </select>
            </div>

            <div id="batch-container" style="margin-bottom: 1rem; display: none;">
                <label for="batch_id" style="display: block; margin-bottom: 0.5rem; color: #555;">Select Batch</label>
                <select name="batch_id" id="batch_id" style="background: #f0f4f8; border: 1px solid #d1d9e6;">
                    <option value="" disabled selected>Select Your Batch</option>
                    {% for batch in batches %}
                    <option value="{{ batch._id }}">{{ batch.name }}</option>
                    {% endfor %}
                </select>
            </div>

            <script>
                function toggleBatchSelection() {
                    const role = document.getElementById('role').value;
                    const batchContainer = document.getElementById('batch-container');
                    const batchSelect = document.getElementById('batch_id');

                    if (role === 'student') {
                        batchContainer.style.display = 'block';
                        batchSelect.setAttribute('required', 'required');
                    } else {
                        batchContainer.style.display = 'none';
                        batchSelect.removeAttribute('required');
                    }
                }
            </script>

            <div style="margin-bottom: 1rem;">
                <label for="name" style="display: block; margin-bottom: 0.5rem; color: #555;">Full Name</label>
                <input type="text" id="name" name="name" required autocomplete="off"
                    style="background: #f0f4f8; border: 1px solid #d1d9e6;">
            </div>

            <div style="margin-bottom: 1rem;">
                <label for="email" style="display: block; margin-bottom: 0.5rem; color: #555;">Email Address</label>
                <input type="email" id="email" name="email" required autocomplete="off"
                    style="background: #f0f4f8; border: 1px solid #d1d9e6;">
            </div>

            <div style="margin-bottom: 1rem;">
                <label for="id_number" style="display: block; margin-bottom: 0.5rem; color: #555;">ID Number</label>
                <input type="text" id="id_number" name="id_number" required autocomplete="off"
                    style="background: #f0f4f8; border: 1px solid #d1d9e6;">
            </div>

            <div style="margin-bottom: 2rem;">
                <label for="password" style="display: block; margin-bottom: 0.5rem; color: #555;">Password</label>
                <input type="password" id="password" name="password" required
                    style="background: #f0f4f8; border: 1px solid #d1d9e6;">
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%; padding: 12px;">Register</button>
        </form>
        <p style="text-align: center; margin-top: 1.5rem; font-size: 0.9rem;">
            Already registered? <a href="/login"
                style="color: var(--primary-color); text-decoration: none; font-weight: 600;">Login here</a>
        </p>
    </div>
</div>
{% endblock %}